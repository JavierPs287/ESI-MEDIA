<app-navbar></app-navbar>
<body class="background">
  <div class="totp-container">
    <div class="totp-card">
      <h2>Activa la verificación en dos pasos (2FA)</h2>
      
      <div *ngIf="error" class="error-message">
        {{ error }}
      </div>
      
      <div *ngIf="loading" class="loading">
        <p>Generando código QR</p>
      </div>
      
      <ng-container *ngIf="!loading && !error">
        <p class="info-text">Escanea este código QR con Google Authenticator, Authy o cualquier app compatible.</p>
        
        <div *ngIf="qrUrl; else noQr" class="qr-wrapper">
          <img 
            [src]="qrUrl" 
            alt="Código QR TOTP" 
            width="300" 
            height="300"
          />
        </div>
        
        <ng-template #noQr>
          <div class="no-qr">
            <p>No se pudo generar el código QR</p>
          </div>
        </ng-template>
        
        <div *ngIf="secret" class="secret-container">
          <p>Si no puedes escanear el código, introduce este secreto manualmente:</p>
          <strong>{{ secret }}</strong>
        </div>
        
        <p class="info-text">Después, introduce el código generado por la app para completar la activación.</p>
        
        <div class="actions">
          <button type="button" class="continue-btn" (click)="goToHome()">Continuar al inicio</button>
        </div>
      </ng-container>
      
      <hr class="divider">
      
      <div class="log-in">
        <p class="info-link">
          <a class="link" href="/login">Volver al inicio de sesión</a>
        </p>
      </div>
    </div>
  </div>
</body>